sudo: false
dist: c7
language: ruby
cache: bundler
before_install:
- bundle -v
- rm Gemfile.lock || true
- gem update --system
- gem update bundler
- gem --version
- bundle -v
script:
- bundle exec rake $CHECK
matrix:
  fast_finish: true
  include:
  - rvm: 2.1.9
    bundler_args: "--without system_tests development"
    env: PUPPET_VERSION="~> 4.0" STRICT_VARIABLES=yes CHECK=test
  - rvm: 2.2.7
    bundler_args: "--without system_tests development"
    env: PUPPET_VERSION="~> 4.0" STRICT_VARIABLES=yes CHECK=test
  - rvm: 2.3.4
    bundler_args: "--without system_tests development"
    env: PUPPET_VERSION="~> 4.0" STRICT_VARIABLES=yes CHECK=test
  - rvm: 2.4.1
    bundler_args: "--without system_tests development"
    env: PUPPET_VERSION="~> 4.0" STRICT_VARIABLES=yes CHECK=test
  - rvm: default
    bundler_args:
    sudo: required
    services: docker
    env: BEAKER_debug=1 PUPPET_INSTALL_TYPE=agent CHECK=beaker
branches:
  only:
  - master
  - "/^v\\d/"
notifications:
  email:
  - project@bendler-net.de
deploy:
  provider: puppetforge
  user: thbe
  password:
    secure: fY+7CJAu6MpWQ6fpEPXtv0W9QTg8cjtdj5doDxW9XEFQugU1WcZ/LipyynZUGwXLdg/IniujmolRtlk+VzXrAlrq6zAjcER4TwxdR7vpC2STZdEmvl+KeeSMXgnU00opyO1SE5vTvQ720JK2S1aFnAdejgENl5CmEwCxr0MDTMg8Lgj6W4O2Lef+oGsN9x7KoE4mRvaO6A6oo34OCqmEFD7LhsSjoqKshhokn6xT0PPrAoYNvAl+WMTRUyM9fvfb2MZpa0BlfwJm3xXnSyR74IhK23X6b4GJnr+HRUTnffnRlKcH8GpDtyjoFCZ/qi5YT8xp2GRsDcH1Fp8Rtyf/0GyxOw07uK0Kq0QJ9PECdzGyeYQBF9U26BQNVlEAiKY1BFSXjWm05ITBxUYETfyzArkTMVncfcXOT5dtMB3sA3mq58J6G0WFjKEzTaN8eOwMiQdnOJ69G+uznO4p1w+ESBqoB3YQcJo8V0ACbieADJCmQIcC52q4EFzZk4oa7ZTxFlE0n38dJ/nHcS3MmIrUtyzGPpsEWSzjN5ultXFFaJofC5BadDjErq/xppCmTJhXXXby+WWHuiwafD89BTMQKBuCWA+wE5QuQAI5w9lm89x/ZLknOhMFRvOtvTfDyYUu7kWIr+OEfPKH25GilLKkpoayKC8AxNSFik3uLeRjEtc=
